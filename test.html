<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Change IDs Example</title>
<style>
  /* Styling for the divs */
  .box {
    width: 100px;
    height: 50px;
    border: 1px solid #000;
    margin: 5px;
    display: inline-block;
    text-align: center;
    line-height: 50px;
    font-size: 16px;
  }

  .gray-background {
    background-color: #ccc; /* Gray background color */
    color: transparent; /* Transparent text */
  }
</style>
</head>
<body>
  <div id="textbox-container">
    <!-- Initial set of boxes -->
    <div class="box" id="box1">box1</div>
    <div class="box" id="box2">box2</div>
    <div class="box" id="box3">box3</div>
    <div class="box" id="box4">box4</div>
    <div class="box" id="box5">box5</div>
    <div class="box" id="box6">box6</div>
    <div class="box" id="box7">box7</div>
  </div>
  <button onclick="changeIDs()">Change IDs</button>
  <button onclick="changeIDsBackwards()">Change IDs Backwards</button>

  <script>
    // Variable to track the current highest box number
    let highestBoxNumber = 7; // Initial highest box number

    // JavaScript function to change IDs and update text content forwards
    function changeIDs() {
      let boxes = document.getElementsByClassName('box');
      let maxBoxNumber = 10; // Change this to your desired max box number

      // Check if the current highest box number is less than the maximum allowed
      if (highestBoxNumber < maxBoxNumber) {
        // Calculate the new highest box number after updating IDs
        let newHighestBoxNumber = highestBoxNumber + boxes.length;

        // Check if the new highest box number exceeds the maximum allowed
        if (newHighestBoxNumber > maxBoxNumber) {
          // Adjust boxes that should disappear
          let boxesToHide = newHighestBoxNumber - maxBoxNumber;

          // Loop through boxes to update IDs and visibility
          for (let i = 0; i < boxes.length; i++) {
            let currentBox = boxes[i];
            let newBoxNumber = highestBoxNumber + i + 1;

            // Update ID and text content
            currentBox.setAttribute('id', `box${newBoxNumber}`);
            currentBox.innerText = `box${newBoxNumber}`;

            // Hide boxes that exceed the maximum allowed box number
            if (newBoxNumber > maxBoxNumber) {
              currentBox.classList.add('gray-background'); // Add gray background class
            } else {
              currentBox.classList.remove('gray-background'); // Remove gray background class if previously added
            }
          }

          // Update highestBoxNumber to the maximum allowed box number
          highestBoxNumber = maxBoxNumber;
        } else {
          // If new highest box number is within the maximum allowed, update normally
          for (let i = 0; i < boxes.length; i++) {
            let currentBox = boxes[i];
            let newBoxNumber = highestBoxNumber + i + 1;
            currentBox.setAttribute('id', `box${newBoxNumber}`);
            currentBox.innerText = `box${newBoxNumber}`;
            currentBox.classList.remove('gray-background'); // Ensure gray background is removed if previously added
          }

          // Update highestBoxNumber to the new highest box number
          highestBoxNumber = newHighestBoxNumber;
        }
      }

      // Disable the forward button if the maximum box number is reached
      if (highestBoxNumber >= maxBoxNumber) {
        document.getElementById('change-forward-btn').disabled = true;
      } else {
        document.getElementById('change-forward-btn').disabled = false;
      }
    }

    // JavaScript function to change IDs and update text content backwards
    function changeIDsBackwards() {
      let boxes = document.getElementsByClassName('box');
      let minBoxNumber = 1; // Minimum box number
      let boxSetSize = boxes.length; // Size of each box set

      // Calculate the new lowest box number after updating IDs backwards
      let newLowestBoxNumber = Math.max(minBoxNumber, highestBoxNumber - boxSetSize);

      // Calculate the starting box number for the previous row
      let startBoxNumber = Math.max(minBoxNumber, newLowestBoxNumber - boxSetSize + 1);

      // Loop through boxes to update IDs and visibility backwards
      for (let i = 0; i < boxes.length; i++) {
        let currentBox = boxes[i];
        let newBoxNumber = startBoxNumber + i;

        // Update ID and text content
        currentBox.setAttribute('id', `box${newBoxNumber}`);
        currentBox.innerText = `box${newBoxNumber}`;

        // Apply gray background to boxes that are higher than the new lowest box number
        if (newBoxNumber > highestBoxNumber) {
          currentBox.classList.add('gray-background');
        } else {
          currentBox.classList.remove('gray-background');
        }
      }

      // Update highestBoxNumber to the new lowest box number plus the box set size
      highestBoxNumber = newLowestBoxNumber + boxSetSize - 1;

      // Disable the backwards button if the minimum box number is reached
      if (newLowestBoxNumber <= minBoxNumber) {
        document.getElementById('change-backward-btn').disabled = true;
      } else {
        document.getElementById('change-backward-btn').disabled = false;
      }
    }
  </script>
</body>
</html>
